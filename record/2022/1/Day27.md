wc

## A. oper

## B. rrads

瞎写一个莫队暴力。

## C. word

一开始将所有位标记为可能出现，然后第二位猜最大子树，第一位猜次大子树，剩下三个同理，无色的标记为不可能出现，仍然是从前往后处理。

冲了一堆，一分没有。

---

遗憾离场。

---

晚上的时候发现 **询问单词必须是词库里的**，寄了寄了。

## S1304

[s1304](https://www.sjzezoj.com/contest/206/problem/1304). 

不过河的是平凡的。

如果只有一条河，就是要最小化 $\sum |x - s_i| + |x - t_i|$，那么把 $s, t$ 放到一起取中位数即可。

如果是两条河，就是要最小化 $\sum \min(|a - s_i| + |a - t_i|, |b - s_i| + |b - t_i|)$，没法把 $s, t$ 拆开了，问题变得复杂。

这种二元关系可以考虑点对，现在的问题就是 $y = x$ 上选两点，使其他点选一个作为目标，曼哈顿距离和最小，显然一个点可以对称，画出图可以发现，应该存在一条 $y = -x + b$ 的线，将所有点划分为两部分，其中下部点连接第一桥，上部点连接第二桥，故将所有点按照 $x + y$ 排序，一定是前一部分走第一桥，后一部分走第二桥，这样问题就容易了，枚举分割点，前后都是 $k = 1$ 的 trivial 情形，随便搞搞即可。

## CF903G

[cf903g](https://www.luogu.com.cn/problem/CF903G). 

首先最大流 = 最小割。

左边割一条边，后面不会再割，所以左边只会割一条。

同理，右边割一条边，前面不会再割，所以右边也只会割一条。

一种 trivial 的割边方案是割掉 $m$ 条桥梁，考虑如果割掉左 $i \to i + 1$，则所有起点在 $i + 1$ 之后的不需要割，如果割掉右边 $i \to i + 1$，终点在 $1 \to i$ 的无需考虑。

我们称割左 $u$ 右 $v$ 为 $(u, v)$，此时有 $cost(u, v) = A(u) + B(v) + \sum_{i\le u, j \gt v} c(i, j)$，其中 $c(i, j)$ 表示左 $i$ 向右 $j$ 的流量和。

注意到操作中只会修改 $A$，那么对于一个 $u$，其最优的 $v$ 是确定的，考虑如果能预处理出后面那一坨称作 $p_u$，那么答案相当于 $\min(a_u + p_u)$，这是容易的。

现在的问题在于怎么求 $p_u$。

这就比较容易了，枚举 $u$，用 `SegmentTree` 动态维护每个 $v$ 的最小值。

## CF1430G

[cf1430g](https://www.luogu.com.cn/problem/CF1430G). 

随便 dp 一下就行了吧？

