## A. gra

---

考虑增量，不妨设此时维护了一个栈，里面所有点向上一个点连边同色，假定此时其他点已经处理好，接下来加入 $i$ 这个点，考虑若 $(i, top)$ 和 `col[top]` 不同，这意味着这些边没有双全法，那么我们弹出 `top`，并记录 `top` 的后一个点 $i$，直到栈里只剩下 $1$ 或者存在同色为止，然后记录此时的 `top` 为 `pre[i]`，并记录这时的 `col[i]`，考虑最终的栈，令 `final = col[n]`，暴力扫描所有点，如果一个点和 `pre` 构成的颜色(即 `col`)与 `final` 同色，那么连接 `pre`，否则 `nxt`，这样可以保证所有边都是同色的，因为 `pre` 和 `nxt` 颜色一定不同，考虑为什么不相交，这也是显然的，考虑一个点向 `pre` 连边，那么中间的点不会和后面连边，因为他们都被弹掉了，`nxt` 不会找到后面，后面同理，不会和前面连边，因为 `pre` 被上一个栈点卡住了，不可能到前面，连边 `nxt` 也是类似的。

## B. edg

---

偶度数应该是想到欧拉回路的，但是并没有想到欧拉回路仅仅用来辅助定向，考虑欧拉回路对边定向，此时每个点都是 $\dfrac{k}{2}$ 的入度出度，拆点，每个点入点向其他点的出点连边，正则二分图必有完美匹配，直接跑 dinic 即可，解一定形如若干循环流。

